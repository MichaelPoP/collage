Collage=function(){var e=function(e,t){return e.exports=t,function(e){"use strict";function t(){}function i(e,t){if(r)return t.indexOf(e);var n=t.length;while(n--)if(t[n]===e)return n;return-1}var n=t.prototype,r=Array.prototype.indexOf?!0:!1;n._getEvents=function(){return this._events||(this._events={})},n.getListeners=function(e){var t=this._getEvents();return t[e]||(t[e]=[])},n.addListener=function(e,t){var n=this.getListeners(e);return i(t,n)===-1&&n.push(t),this},n.on=n.addListener,n.removeListener=function(e,t){var n=this.getListeners(e),r=i(t,n);return r!==-1&&(n.splice(r,1),n.length===0&&this.removeEvent(e)),this},n.off=n.removeListener,n.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},n.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},n.manipulateListeners=function(e,t,n){var r,i,s=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if(typeof t=="object")for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&(typeof i=="function"?s.call(this,r,i):o.call(this,r,i));else{r=n.length;while(r--)s.call(this,t,n[r])}return this},n.removeEvent=function(e){return e?delete this._getEvents()[e]:delete this._events,this},n.emitEvent=function(e,t){var n=this.getListeners(e),r=n.length,i;while(r--)i=t?n[r].apply(null,t):n[r](),i===!0&&this.removeListener(e,n[r]);return this},n.trigger=n.emitEvent,n.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},typeof define=="function"&&define.amd?define(function(){return t}):e.EventEmitter=t}(this),e.exports}({},{}),n=function(t,n){t.exports=n,e;var r=t.exports=function(e){this.emitter=new EventEmitter,this.collage=e,this.waiting=0,this.count=0,this.loaded=[],this.resources={}};return r.getApi=function(e){var t={};return t.element=e.getElement.bind(e),t.getNonvisibileElement=e.getNonvisibileElement.bind(e),t.progress=e.getProgress.bind(e),t.on=e.emitter.on.bind(e.emitter),t.removeListener=e.emitter.removeListener.bind(e.emitter),Object.defineProperty(t,"elements",{get:function(){return e.loaded.slice()}}),Object.defineProperty(t,"tryLimit",{get:function(){return e.tryLimit},set:function(t){e.tryLimit=t}}),Object.defineProperty(t,"skipProbability",{get:function(){return e.skipProbability},set:function(t){e.skipProbability=t}}),Object.defineProperty(t,"enabled",{get:function(){return e.enabled},set:function(t){t?e.enable():e.disable()}}),Object.defineProperty(t,"priority",{get:function(){return e.priority},set:function(t){e.priority=t,e.enabled&&(e.collage.removeCollection(e),e.collage.addCollection(e))}}),t},r.prototype.enabled=!1,r.prototype.tryLimit=1,r.prototype.priority=-1*Infinity,r.prototype.skipProbability=0,r.prototype.enable=function(){if(this.enabled)return;this.enabled=!0,this.collage.addCollection(this),this.emitter.emit("enabled")},r.prototype.disable=function(){if(!this.enabled)return;this.enabled=!1,this.collage.removeCollection(this),this.emitter.emit("disabled")},r.prototype.markResource=function(e){if(e in this.resources)return;this.resources[e]=!0,this.count++,this.setLoading()},r.prototype.removeResource=function(e,t){if(!(e in this.resources))return;delete this.resources[e];var n=this.loaded.indexOf(t);~n&&this.loaded.splice(n,1)},r.prototype.addResource=function(e,t){e in this.resources||this.markResource(e),this.loaded.push(t),this.clearLoading(),this.emitter.emit("progress",this.getProgress())},r.prototype.hasResource=function(e){return e in this.resources},r.prototype.setLoading=function(){this.waiting++,this.waiting===1&&this.emitter.emit("loading")},r.prototype.clearLoading=function(){this.waiting--,this.waiting||this.emitter.emit("ready")},r.prototype.getProgress=function(){return this.loaded.length/this.count},r.prototype.getNonvisibileElement=function(){if(this.skipProbability>Math.random())return;var e=0,t=this.loaded.length,n,r;if(!t)return;for(;e<this.tryLimit;e++){n=this.getElement();if(!n.locations.some(this.collage.touchesCanvas))return n}},r.prototype.getElement=function(){return this.loaded[Math.random()*this.loaded.length|0]},t.exports}({},{}),r=function(e,t){return e.exports=t,function(n,r){typeof t=="object"&&t?e.exports=r:typeof define=="function"&&define.amd?define(r):n.Mustache=r}(this,function(){function u(e,t){return RegExp.prototype.test.call(e,t)}function a(e){return!u(r,e)}function l(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function h(e){return String(e).replace(/[&<>"'\/]/g,function(e){return c[e]})}function p(e){this.string=e,this.tail=e,this.pos=0}function d(e,t){this.view=e,this.parent=t,this.clearCache()}function v(){this.clearCache()}function m(e){function n(e,n,r){if(!t[e]){var i=m(n);t[e]=function(e,t){return i(e,t,r)}}return t[e]}var t={};return function(t,r,i){var s="",o,u;for(var a=0,f=e.length;a<f;++a){o=e[a];switch(o[0]){case"#":u=i.slice(o[3],o[5]),s+=t._section(o[1],r,u,n(a,o[4],i));break;case"^":s+=t._inverted(o[1],r,n(a,o[4],i));break;case">":s+=t._partial(o[1],r);break;case"&":s+=t._name(o[1],r);break;case"name":s+=t._escaped(o[1],r);break;case"text":s+=o[1]}}return s}}function g(e){var t=[],n=t,r=[],i;for(var s=0,o=e.length;s<o;++s){i=e[s];switch(i[0]){case"#":case"^":r.push(i),n.push(i),n=i[4]=[];break;case"/":var u=r.pop();u[5]=i[2],n=r.length>0?r[r.length-1][4]:t;break;default:n.push(i)}}return t}function y(e){var t=[],n,r;for(var i=0,s=e.length;i<s;++i)n=e[i],n[0]==="text"&&r&&r[0]==="text"?(r[1]+=n[1],r[3]=n[3]):(r=n,t.push(n));return t}function b(e){return[new RegExp(l(e[0])+"\\s*"),new RegExp("\\s*"+l(e[1]))]}var e={};e.name="mustache.js",e.version="0.7.2",e.tags=["{{","}}"],e.Scanner=p,e.Context=d,e.Writer=v;var t=/\s*/,n=/\s+/,r=/\S/,i=/\s*=/,s=/\s*\}/,o=/#|\^|\/|>|\{|&|=|!/,f=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};e.escape=h,p.prototype.eos=function(){return this.tail===""},p.prototype.scan=function(e){var t=this.tail.match(e);return t&&t.index===0?(this.tail=this.tail.substring(t[0].length),this.pos+=t[0].length,t[0]):""},p.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n),this.pos+=n}return t},d.make=function(e){return e instanceof d?e:new d(e)},d.prototype.clearCache=function(){this._cache={}},d.prototype.push=function(e){return new d(e,this)},d.prototype.lookup=function(e){var t=this._cache[e];if(!t){if(e===".")t=this.view;else{var n=this;while(n){if(e.indexOf(".")>0){var r=e.split("."),i=0;t=n.view;while(t&&i<r.length)t=t[r[i++]]}else t=n.view[e];if(t!=null)break;n=n.parent}}this._cache[e]=t}return typeof t=="function"&&(t=t.call(this.view)),t},v.prototype.clearCache=function(){this._cache={},this._partialCache={}},v.prototype.compile=function(t,n){var r=this._cache[t];if(!r){var i=e.parse(t,n);r=this._cache[t]=this.compileTokens(i,t)}return r},v.prototype.compilePartial=function(e,t,n){var r=this.compile(t,n);return this._partialCache[e]=r,r},v.prototype.compileTokens=function(e,t){var n=m(e),r=this;return function(e,i){if(i)if(typeof i=="function")r._loadPartial=i;else for(var s in i)r.compilePartial(s,i[s]);return n(r,d.make(e),t)}},v.prototype.render=function(e,t,n){return this.compile(e)(t,n)},v.prototype._section=function(e,t,n,r){var i=t.lookup(e);switch(typeof i){case"object":if(f(i)){var s="";for(var o=0,u=i.length;o<u;++o)s+=r(this,t.push(i[o]));return s}return i?r(this,t.push(i)):"";case"function":var a=this,l=function(e){return a.render(e,t)},c=i.call(t.view,n,l);return c!=null?c:"";default:if(i)return r(this,t)}return""},v.prototype._inverted=function(e,t,n){var r=t.lookup(e);return!r||f(r)&&r.length===0?n(this,t):""},v.prototype._partial=function(e,t){!(e in this._partialCache)&&this._loadPartial&&this.compilePartial(e,this._loadPartial(e));var n=this._partialCache[e];return n?n(t):""},v.prototype._name=function(e,t){var n=t.lookup(e);return typeof n=="function"&&(n=n.call(t.view)),n==null?"":String(n)},v.prototype._escaped=function(t,n){return e.escape(this._name(t,n))},e.parse=function(r,u){function E(){if(m&&!w)while(v.length)d.splice(v.pop(),1);else v=[];m=!1,w=!1}r=r||"",u=u||e.tags,typeof u=="string"&&(u=u.split(n));if(u.length!==2)throw new Error("Invalid tags: "+u.join(", "));var f=b(u),c=new p(r),h=[],d=[],v=[],m=!1,w=!1,S,x,T,N;while(!c.eos()){S=c.pos,T=c.scanUntil(f[0]);if(T)for(var C=0,k=T.length;C<k;++C)N=T.charAt(C),a(N)?v.push(d.length):w=!0,d.push(["text",N,S,S+1]),S+=1,N==="\n"&&E();S=c.pos;if(!c.scan(f[0]))break;m=!0,x=c.scan(o)||"name",c.scan(t);if(x==="=")T=c.scanUntil(i),c.scan(i),c.scanUntil(f[1]);else if(x==="{"){var L=new RegExp("\\s*"+l("}"+u[1]));T=c.scanUntil(L),c.scan(s),c.scanUntil(f[1]),x="&"}else T=c.scanUntil(f[1]);if(!c.scan(f[1]))throw new Error("Unclosed tag at "+c.pos);if(x==="/"){if(h.length===0)throw new Error('Unopened section "'+T+'" at '+S);var A=h.pop();if(A[1]!==T)throw new Error('Unclosed section "'+A[1]+'" at '+S)}var O=[x,T,S,c.pos];d.push(O);if(x==="#"||x==="^")h.push(O);else if(x==="name"||x==="{"||x==="&")w=!0;else if(x==="="){u=T.split(n);if(u.length!==2)throw new Error("Invalid tags at "+S+": "+u.join(", "));f=b(u)}}var A=h.pop();if(A)throw new Error('Unclosed section "'+A[1]+'" at '+c.pos);return g(y(d))};var w=new v;return e.clearCache=function(){return w.clearCache()},e.compile=function(e,t){return w.compile(e,t)},e.compilePartial=function(e,t,n){return w.compilePartial(e,t,n)},e.compileTokens=function(e,t){return w.compileTokens(e,t)},e.render=function(e,t,n){return w.render(e,t,n)},e.to_html=function(t,n,r,i){var s=e.render(t,n,r);if(typeof i!="function")return s;i(s)},e}()),e.exports}({},{}),i=function(e,t){function n(e){this.element=e.element,this.video=e,this.width=parseInt(this.element.getAttribute("width")),this.height=parseInt(this.element.getAttribute("height")),this.locations=[],this.hide()}return e.exports=t,e.exports=n,n.prototype.hide=function(){this.video.continuousPlay||this.video.pauseVideo()},n.prototype.show=function(e,t){this.element.style.left=e+"px",this.element.style.top=t+"px",this.video.continuousPlay||this.video.playVideo()},e.exports}({},{}),s=function(e,t){function u(e){e=e||{};var t=e.width||1060,n=e.height||650,r=_.uniqueId("container"),i=_.uniqueId("player"),s,o=$('<div class="video-container" width="'+t+'" height="'+n+'"><div id="'+i+'"></div><div class="video-mask"></div></div>')[0];e.container.appendChild(o),new YT.Player(i,{height:n,width:t,playerVars:{controls:0,html5:1},videoId:e.videoId,events:{onReady:function(t){var n=t.target;if(s){e.videoId&&n.cueVideoById(e.videoId);return}s=new f(n,o),e.videoId&&n.cueVideoById(e.videoId),e.callback&&e.callback(a(s))},onStateChange:function(e){}}})}function a(e){var t=e.player;return t.element=e.element,t.on=e.emitter.on.bind(e.emitter),t.removeListener=e.emitter.removeListener.bind(e.emitter),t.kill=e.kill.bind(e),t}function f(e,t){this.id=e.id,this.player=e,this.element=t,this.lastReportedTime=0,this.emitter=new EventEmitter,e.addEventListener("onStateChange",_.bind(this.onStatusChange,this))}e.exports=t;var r=n,s=i,o=e.exports=function(){r.apply(this,arguments),this.container=this.collage.element,this.documentFragment=document.createDocumentFragment()};return o.prototype=Object.create(r.prototype),o.create=function(e,t){t=t||{};var n=new o(e);return t.tryLimit&&(n.tryLimit=t.tryLimit),t.priority!==void 0&&(n.priority=t.priority),t.skipProbability!==void 0&&(n.skipProbability=t.skipProbability),t.disabled||n.enable(),o.getApi(n)},o.getApi=function(e){var t=r.getApi(e);return t.add=e.add.bind(e),t},o.prototype.add=function(e,t){if(this.hasResource(e))return;var n=this;t=t||{},this.markResource(e),u({videoId:e,container:this.container,width:t.width,height:t.height,callback:function(r){var i=new s(r);t.loop&&(r.loop=!0),t.continuousPlay&&(r.continuousPlay=!0,r.playVideo()),t.mute&&(r.mute(),r.setVolume(0)),n.addResource(e,i),t.callback&&t.callback(i)}})},f.prototype.kill=function(){this.container.parentNode.removeChild(this.container),this.emitter.emit("dead")},f.prototype.onStatusChange=function(e){switch(e.data){case-1:this.emitter.emit("unstarted");break;case 0:this.emitter.emit("ended"),this.player.loop&&(this.player.seekTo(0),this.player.playVideo());break;case 1:this.emitter.emit("playing");break;case 2:this.emitter.emit("paused");break;case 3:this.emitter.emit("buffering");break;case 5:this.emitter.emit("video cued")}},e.exports}({},{}),o=function(e,t){function n(e){this.element=e,this.width=this.element.clientWidth,this.height=this.element.clientHeight,this.locations=[],this.hide()}return e.exports=t,e.exports=n,n.prototype.hide=function(){this.element.style.opacity=0},n.prototype.show=function(e,t){this.element.style.opacity=1,this.element.style.left=e+"px",this.element.style.top=t+"px"},e.exports}({},{}),u=function(e,t){e.exports=t;var r=n,i=o,s=e.exports=function(){r.apply(this,arguments),this.container=this.collage.element,this.tweetArea=document.createElement("div"),this.tweetArea.className="tweet-area",this.container.appendChild(this.tweetArea),this.loading=[];var e=this;this.emitter.on("ready",function(){clearInterval(e.checkLoadedInterval),e.checkLoadedInterval=void 0})};s.prototype=Object.create(r.prototype),s.create=function(e,t){t=t||{};var n=new s(e);return t.tryLimit&&(n.tryLimit=t.tryLimit),t.priority!==void 0&&(n.priority=t.priority),t.skipProbability!==void 0&&(n.skipProbability=t.skipProbability),t.disabled||n.enable(),s.getApi(n)},s.getApi=function(e){var t=r.getApi(e);return t.add=e.add.bind(e),t.addByQuery=e.addByQuery.bind(e),t},s.prototype.checkLoadStatus=function(){var e,t;for(e in this.loading)this.loading.hasOwnProperty(e)&&(t=this.loading[e].iframe,t&&t.clientHeight!==0&&t.contentDocument&&t.contentDocument.body.innerHTML!==""&&(this.loading[e].onload(),delete this.loading[e]))};var u="http://search.twitter.com/search.json?format=json",a=0,f={};return window.TWITTER_CALLBACKS=f,s.prototype.addByQuery=function(e){var t=this,n=document.createElement("script"),r="cb"+a++,i=u+"&callback=TWITTER_CALLBACKS."+r+"&q="+e;n.async=!0,n.src=i,this.setLoading(),f[r]=function(e){delete f[r],e.results.forEach(function(e){t.add("https://twitter.com/"+e.from_user+"/status/"+e.id_str)}),t.clearLoading()},document.body.appendChild(n)},s.prototype.add=function(e){if(this.hasResource(e))return;var t=this,n=document.createElement("blockquote"),r=document.createElement("a");n.className="twitter-tweet",r.href=e,n.appendChild(r),this.tweetArea.appendChild(n),twttr.widgets.load(this.tweetArea);var s=this.tweetArea.getElementsByTagName("iframe");n=s[s.length-1],this.markResource(e),this.loading[e]={iframe:n,onload:function(){t.addResource(e,new i(n))}},this.checkLoadedInterval||(this.checkLoadedInterval=setInterval(function(){t.checkLoadStatus()},500))},e.exports}({},{}),a=function(e,t){e.exports=t;var n="http://api.flickr.com/services/feeds/photos_public.gne?format=json",r=0,i={};return window.FLICKR_CALLBACKS=i,e.exports=function(e){var t=this,s=document.createElement("script"),o="cb"+r++,u=n+"&jsoncallback=FLICKR_CALLBACKS."+o+"&tags="+e;s.async=!0,s.src=u,this.setLoading(),i[o]=function(e){delete i[o],e.items.forEach(function(e){t.add(e.media.m.replace("_m.jpg","_z.jpg"))}),t.clearLoading()},document.body.appendChild(s)},e.exports}({},{}),f=function(e,t){function n(e){this.element=e,this.locations=[],this.width=parseInt(e.width),this.height=parseInt(e.height)}e.exports=t,e.exports=n;var r=document.createDocumentFragment();return n.prototype.hide=function(){r.appendChild(this.element)},n.prototype.show=function(e,t,n){this.element.style.left=e+"px",this.element.style.top=t+"px",n.appendChild(this.element)},e.exports}({},{}),l=function(e,t){e.exports=t;var r=n,i=f,s=e.exports=function(){r.apply(this,arguments)};s.create=function(e,t){t=t||{};var n=new s(e);return t.tryLimit&&(n.tryLimit=t.tryLimit),t.priority!==void 0&&(n.priority=t.priority),t.skipProbability!==void 0&&(n.skipProbability=t.skipProbability),t.disabled||n.enable(),s.getApi(n)},s.prototype=Object.create(r.prototype),s.getApi=function(e){var t=r.getApi(e);return t.add=e.add.bind(e),t.loadFromFlickr=a.bind(e),t};var o=document.createDocumentFragment();return s.prototype.add=function(e){if(this.hasResource(e))return;var t=this,n=new Image;n.src=e,this.markResource(e),n.onload=function(){o.appendChild(n);var r=new i(n);t.addResource(e,r)},n.onerror=function(){t.clearLoading(),t.removeResource(e)}},e.exports}({},{}),c=function(e,t){e.exports=t;var i=n,s=f,o=r,u=e.exports=function(){i.apply(this,arguments)};u.prototype=Object.create(i.prototype),u.create=function(e,t){t=t||{};var n=new u(e);return t.tryLimit&&(n.tryLimit=t.tryLimit),t.priority!==void 0&&(n.priority=t.priority),t.skipProbability!==void 0&&(n.skipProbability=t.skipProbability),t.disabled||n.enable(),u.getApi(n)},u.getApi=function(e){var t=i.getApi(e);return t.add=e.add.bind(e),t};var a='<h2><a href="{{url}}">{{{title}}}</a></h2>{{#image}}<img class="article-image" src="{{image.src}}" width="{{image.width}}" height="{{image.height}}"/>{{/image}}<div class="article-attribution"><img class="nyt-brand" src="http://graphics8.nytimes.com/packages/images/developer/logos/poweredby_nytimes_30a.png"/><span class="byline">{{{byline}}}</span><span class="date">{{date}}</span></div><p>{{{body}}}</p>',l=document.createDocumentFragment();return u.prototype.add=function(e){if(this.hasResource(e.title))return;var t=this,n=document.createElement("div");n.className="nytimes-article";var r={title:e.title,byline:e.byline,date:(new Date(e.publication_year,e.publication_month,e.publication_day)).toLocaleDateString(),body:e.body,url:e.url};e.small_image_url&&(r.image={src:e.small_image_url.replace(/thumbStandard.*\./,"hpMedium."),height:253,width:337}),n.innerHTML=o.render(a,r),document.body.appendChild(n),this.markResource(e.title),setTimeout(function(){n.width=n.clientWidth,n.height=n.clientHeight,l.appendChild(n),t.addResource(e.title,new s(n))})},e.exports}({},{}),h=function(e,t){return e.exports=t,t.Image=l,t.Tweet=u,t.NYTimesArticle=c,t.Youtube=s,e.exports}({},{}),p=function(e,n){return e.exports=n,e.exports=function(){var e=function(e,n){return e.exports=n,e.exports=function(){var e=function(e,n){e.exports=n,n.linear=function(e,t,n,r){return n*e/r+t},n.quadraticIn=function(e,t,n,r){return n*(e/=r)*e+t},n.quadraticOut=function(e,t,n,r){return-n*(e/=r)*(e-2)+t},n.quadraticInOut=function(e,t,n,r){return e/=r/2,e<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},n.cubicIn=function(e,t,n,r){return n*(e/=r)*e*e+t},n.cubicOut=function(e,t,n,r){return e/=r,n*(--e*e*e+1)+t},n.cubicInOut=function(e,t,n,r){return e/=r/2,e<1?n*(e/=r)*e*e+t:n/2*((e-=2)*e*e+2)+t};var r=Math.PI/2;return n.sinusoidalIn=function(e,t,n,i){return-n*Math.cos(e/i*r)+n+t},n.sinusoidalOut=function(e,t,n,i){return n*Math.sin(e/i*r)+t},n.sinusoidalInOut=function(e,t,n,r){return-n/2*(Math.cos(Math.PI*e/r)-1)+t},n.exponentialIn=function(e,t,n,r){return n*Math.pow(2,10*(e/r-1))+t},n.exponentialOut=function(e,t,n,r){return n*(-Math.pow(2,-10*e/r)+1)+t},n.exponentialInOut=function(e,n,r,i){return e/=i/2,e<1?r/2*Math.pow(2,10*(e-1))+n:r/2*(-Math.pow(2,-10*--t)+2)+n},e.exports}({},{}),n=function(t,n){t.exports=n;var r=t.exports=function(e,t,n,r,i,s){function h(){if(l)return;l=!0,cancelAnimationFrame(c),f=Date.now()}function p(){if(!l)return;l=!1,a+=Date.now()-f,c=requestAnimationFrame(d)}function d(){var r=Date.now()-a;r<i?(t[n]=e(r,o,u,i),c=requestAnimationFrame(d)):(t[n]=e(i,o,u,i),s&&s())}i=i||0;var o=t[n],u=r-o,a=Date.now(),f=a,l=!0,c;return p(),{resume:p,pause:h}},i=e,s;for(s in i)i.hasOwnProperty(s)&&(r[s]=r.bind(void 0,i[s]));return r.easing=i,t.exports}({},{});return n}(),e.exports}({},{}),n=function(e,t){e.exports=t;var n=t.noop=function(){};t.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,15)},t.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(e){return clearTimeout(e)},t.requestFullscreen=document.documentElement.requestFullscreen||document.documentElement.mozRequestFullScreen||document.documentElement.webkitRequestFullscreen||n;var r=document.body.style;return t.transformAttribute=r.msTransform!==void 0&&"msTransform"||r.webkitTransform!==void 0&&"webkitTransform"||r.MozTransform!==void 0&&"MozTransform"||r.transform!==void 0&&"transform",t.transitionAttribute=r.msTransition!==void 0&&"msTransition"||r.webkitTransition!==void 0&&"webkitTransition"||r.MozTransition!==void 0&&"MozTransition"||r.transition!==void 0&&"transition",t.filterAttribute=r.msFilter!==void 0&&"msFilter"||r.webkitFilter!==void 0&&"webkitFilter"||r.MozFilter!==void 0&&"MozFilter"||r.filter!==void 0&&"filter",e.exports}({},{}),r=function(t,r){t.exports=r;var i=n,s=i.requestAnimationFrame,o=i.cancelAnimationFrame,u=e,a=t.exports=function(e){this.container=e,this.element=document.createElement("div"),this.element.style.position="absolute",e.appendChild(this.element),this.refit(),this.offsetX=0,this.offsetY=0,this.speedMultiplierX=0,this.speedMultiplierY=0,this.multiStyle={},this.multiStyle[i.transformAttribute]={},this.multiStyle[i.transitionAttribute]={},this.multiStyle[i.filterAttribute]={},this.pointerEventHandler=this.pointerEventHandler.bind(this),this.step=this.step.bind(this)};return a.create=function(e){var t=new a(e);return a.getApi(t)},a.getApi=function(e){var t={};return t.start=e.start.bind(e),t.pause=e.pause.bind(e),t.refit=e.refit.bind(e),t.element=e.element,t.blur=e.setBlur.bind(e),t.grayscale=e.setGrayscale.bind(e),t.opacity=e.setOpacity.bind(e),t.speed=e.setSpeedLimit.bind(e),t.horizontalSpeed=e.setHorizontalSpeedLimit.bind(e),t.verticalSpeed=e.setVerticalSpeedLimit.bind(e),t.horizontalWind=e.setHorizontalWind.bind(e),t.verticalWind=e.setVerticalWind.bind(e),t},a.prototype.horizontalSpeedLimit=4,a.prototype.verticalSpeedLimit=4,a.prototype.horizontalWind=0,a.prototype.verticalWind=0,a.prototype.msPerStep=16,a.prototype.horizontalSpeedGradient=u.easing.quadraticIn,a.prototype.verticalSpeedGradient=u.easing.quadraticIn,a.prototype.pointerTrackingEvents=["mousemove","touchstart","touchend","touchmove"],a.prototype.start=function(){if(this.active)return;this.active=!0,this.attachPointerListeners(),this.lastStepTime=Date.now(),this.animationRequestId=s(this.step)},a.prototype.pause=function(){if(!this.active)return;this.active=!1,o(this.animationRequestId),this.detachPointerListeners()},a.prototype.step=function(){this.refit();var e=Date.now(),t=(e-this.lastStepTime)/this.msPerStep;this.lastStepTime=e,this.offsetX+=t*(this.horizontalWind+this.speedMultiplierX*this.horizontalSpeedLimit),this.offsetY+=t*(this.verticalWind+this.speedMultiplierY*this.verticalSpeedLimit),this.setCssTransform("translate",this.offsetX+"px, "+this.offsetY+"px"),this.animationRequestId=s(this.step)},a.prototype.attachPointerListeners=function(){var e=this;this.pointerTrackingEvents.forEach(function(t){e.container.addEventListener(t,e.pointerEventHandler)}),this.container.addEventListener("mousemove",e.pointerEventHandler)},a.prototype.detachPointerListeners=function(){var e=this;this.pointerTrackingEvents.forEach(function(t){e.container.removeEventListener(t,e.pointerEventHandler)})},a.prototype.pointerEventHandler=function(e){var t=e.changedTouches&&e.changedTouches[0]||e,n=t.clientX-this.left;y=t.clientY-this.top,this.speedMultiplierX=this.horizontalSpeedGradient(n-this.halfWidth,0,n>this.halfWidth?-1:1,this.halfWidth),this.speedMultiplierY=this.verticalSpeedGradient(y-this.halfHeight,0,y>this.halfHeight?-1:1,this.halfHeight)},a.prototype.refit=function(e,t){var n=this.container.getBoundingClientRect();this.width=n.width,this.halfWidth=this.width/2,this.height=n.height,this.halfHeight=this.height/2,this.top=n.top,this.left=n.left},a.prototype.setHorizontalWind=function(e,t,n){if(!t)return this.horizontalWind=e;n=n||this.horizontalWind<e?u.easing.quadraticIn:u.easing.quadraticOut,u(n,this,"horizontalWind",e,t)},a.prototype.setVerticalWind=function(e,t,n){if(!t)return this.verticalWind=e;n=n||this.verticalWind<e?u.easing.quadraticIn:u.easing.quadraticOut,u(n,this,"verticalWind",e,t)},a.prototype.setSpeedLimit=function(e,t,n,r){if(!t){this.horizontalSpeedLimit=e,this.verticalSpeedLimit=e;return}this.setHorizontalSpeedLimit(e,t,n,r),this.setVerticalSpeedLimit(e,t,n)},a.prototype.setHorizontalSpeedLimit=function(e,t,n,r){if(!t)return this.horizontalSpeedLimit=e;n=n||this.horizontalSpeedLimit<e?u.easing.quadraticIn:u.easing.quadraticOut,u(n,this,"horizontalSpeedLimit",e,t,r)},a.prototype.setVerticalSpeedLimit=function(e,t,n,r){if(!t)return this.verticalSpeedLimit=e;n=n||this.verticalSpeedLimit<e?u.easing.quadraticIn:u.easing.quadraticOut,u(n,this,"verticalSpeedLimit",e,t,r)},a.prototype.setBlur=function(e,t){t!==void 0&&this.setCssTransition("-webkit-filter",t+"s"),this.setCssFilter("blur",e+"px")},a.prototype.setGrayscale=function(e,t){t!==void 0&&this.setCssTransition("-webkit-filter",t+"s"),this.setCssFilter("grayscale",e)},a.prototype.setOpacity=function(e,t){t!==void 0&&this.setCssTransition("opacity",t+"s"),this.element.style.opacity=e},a.prototype.setCssTransform=function(e,t){this.cssTransforms[e]=t,this.updateMultiAttributeStyle(i.transformAttribute,this.cssTransforms)},a.prototype.setCssFilter=function(e,t){this.cssFilters[e]=t,this.updateMultiAttributeStyle(i.filterAttribute,this.cssFilters)},a.prototype.setCssTransition=function(e,t){this.cssTransitions[e]=t,this.updateMultiAttributeStyle(i.transitionAttribute,this.cssTransitions,!0)},a.prototype.cssTransitions={"-webkit-filter":"0s",opacity:"0s"},a.prototype.cssFilters={blur:"0px",grayscale:"0"},a.prototype.cssTransforms={translate:"0px, 0px"},a.prototype.updateMultiAttributeStyle=function(e,t,n){var r,i=[];for(r in t)t.hasOwnProperty(r)&&i.push(r+(n?" ":"(")+t[r]+(n?"":")"));this.element.style[e]=i.join(n?", ":" ")},t.exports}({},{});return r}(),e.exports}({},{}),d=function(e,t){return e.exports=t,e.exports=function(){var e=function(e,t){function n(e,t,n,r,i){this.objects=[],this.left=e,this.top=t,this.width=n,this.height=r,this.parent=i}return e.exports=t,e.exports=n,n.prototype.tl=void 0,n.prototype.tr=void 0,n.prototype.br=void 0,n.prototype.bl=void 0,n.prototype.OBJECT_LIMIT=200,n.prototype.clear=function(){this.objects=[],this.tl&&(this.tl.clear(),this.tr.clear(),this.br.clear(),this.bl.clear())},n.prototype.getObjects=function(){return this.tl?this.objects.concat(this.tl.getObjects(),this.tr.getObjects(),this.br.getObjects(),this.bl.getObjects()):this.objects.slice()},n.prototype.split=function(){var e=this.width/2,t=this.height/2,r=this.left,i=this.top;this.tl=new n(r,i,e,t,this),this.tr=new n(r+e,i,e,t,this),this.br=new n(r+e,i+t,e,t,this),this.bl=new n(r,i+t,e,t,this)},n.prototype.parentNode=function(e){var t=this,n;return e.left<t.left?e.top<t.top?n=t.grow(t.width,t.height):n=t.grow(t.width,0):e.left+e.width>t.left+t.width?e.top<t.top?n=t.grow(0,t.height):n=t.grow(0,0):e.top<t.top?n=t.grow(0,t.height):e.top+e.height>t.top+t.height&&(n=t.grow(0,0)),n?n.parentNode(e):t},n.prototype.getQuadrantAt=function(e,t){if(!this.tl)return this;var n=this.left+this.width/2,r=this.top+this.height/2;return e<n?t<r?this.tl.tl&&this.tl.getQuadrantAt(e,t)||this.tl:this.bl.tl&&this.bl.getQuadrantAt(e,t)||this.bl:t<r?this.tr.tl&&this.tr.getQuadrantAt(e,t)||this.tr:this.br.tl&&this.br.getQuadrantAt(e,t)||this.br},n.prototype.getInteractableObjects=function(e,t,n,r){if(!this.tl)return this.objects.slice();var i=this.getQuadrant(e,t,n,r),s=[i.objects],o=[i],u=i.parent;while(u)s.push(u.objects),o.push(u),u=u.parent;if(i.tl){var a=i.getQuadrantAt(e,t);~o.indexOf(a)||(o.push(a),s.push(a.objects),a.parent&&!~o.indexOf(a.parent)&&(o.push(a.parent),s.push(a.parent.objects))),a=i.getQuadrantAt(e+n,t),~o.indexOf(a)||(o.push(a),s.push(a.objects),a.parent&&!~o.indexOf(a.parent)&&(o.push(a.parent),s.push(a.parent.objects))),a=i.getQuadrantAt(e+n,t+r),~o.indexOf(a)||(o.push(a),s.push(a.objects),a.parent&&!~o.indexOf(a.parent)&&(o.push(a.parent),s.push(a.parent.objects))),a=i.getQuadrantAt(e,t+r),~o.indexOf(a)||(o.push(a),s.push(a.objects),a.parent&&!~o.indexOf(a.parent)&&s.push(a.parent.objects))}return Array.prototype.concat.apply([],s)},n.prototype.getQuadrant=function(e,t,n,r){if(!this.tl)return this;var i=this.left+this.width/2,s=this.top+this.height/2,o=t<s&&t+r<s,u=t>s;if(e<i&&e+n<i){if(o)return this.tl.tl&&this.tl.getQuadrant(e,t,n,r)||this.tl;if(u)return this.bl.tl&&this.bl.getQuadrant(e,t,n,r)||this.bl}else if(e>i){if(o)return this.tr.tl&&this.tr.getQuadrant(e,t,n,r)||this.tr;if(u)return this.br.tl&&this.br.getQuadrant(e,t,n,r)||this.br}return this},n.prototype.insert=function(e){var t,n,r,i,s,o;o=this.parentNode(e),t=o.getQuadrant(e.left,e.top,e.width,e.height);if(t!==o)t.insert(e);else{s=o.objects,s.push(e),n=0,r=s.length;if(r>o.OBJECT_LIMIT){o.tl||o.split(),i=[];for(;n<r;n++)e=o.objects[n],t=o.getQuadrant(e.left,e.top,e.width,e.height),t!==o?t.insert(e):i.push(e);o.objects=i}}return o},n.prototype.grow=function(e,t){var r=this.left-e,i=this.top-t,s=new n(r,i,this.width*2,this.height*2);return this.parent=s,e?t?s.br=this:s.tr=this:t?s.bl=this:s.tl=this,s.tl=s.tl||new n(r,i,this.width,this.height,this),s.tr=s.tr||new n(r+this.width,i,this.width,this.height,this),s.br=s.br||new n(r+this.width,i+this.height,this.width,this.height,this),s.bl=s.bl||new n(r,i+this.height,this.width,this.height,this),s},e.exports}({},{}),t=function(t,n){t.exports=n;var r=e,i=t.exports=function(e,t){e&&(this.width=e,this.height=t?t:e),this.reset()};return i.create=function(e,t){var n=new i(e,t);return i.getApi(n)},i.getApi=function(e){var t={};return t.insert=e.insert.bind(e),t.reset=e.reset.bind(e),t.getObjects=e.getObjects.bind(e),t.hasObject=e.hasObject.bind(e),t.prune=e.prune.bind(e),t},i.prototype.width=1e4,i.prototype.height=1e4,i.prototype.reset=function(e,t){e=e||0,t=t||0;var n=-(this.width/2),i=-(this.height/2);this.top=new r(e+n,t+i,this.width,this.height)},i.prototype.insert=function(e){this.top=this.top.insert(e)},i.prototype.getObjects=function(e,t,n,r){return e?this.top.getInteractableObjects(e,t,n,r):this.top.getObjects()},i.prototype.prune=function(e,t,n,r){var i=e+n,s=t+r,o,u=[];keptObjects=[];var a=this.top.getObjects(),f=0,l=a.length;for(;f<l;f++)o=a[f],o.left<e||o.top<t||o.left+o.width>i||o.top+o.height>s?u.push(o):keptObjects.push(o);if(keptObjects.length){this.reset(keptObjects[0].left,keptObjects[0].top),f=0,l=keptObjects.length;for(;f<l;f++)this.insert(keptObjects[f])}else this.reset();return u},i.prototype.hasObject=function(e,t,n,r){var i=this.top.getInteractableObjects(e,t,n,r),s=i.length,o=0,u;for(;o<s;o++){u=i[o];if((t<u.top?t+r>u.top:u.top+u.height>t)&&(e<u.left?e+n>u.left:u.left+u.width>e))return u}return!1},t.exports}({},{});return t}(),e.exports}({},{}),v=function(e,t){e.exports=t;var n=e.exports=function(e,t,n){this.element=e,this.top=n||0,this.left=t||0,this.width=this.element.width,this.height=this.element.height,this.bottom=this.top+this.height,this.right=this.left+this.width};return n.prototype.show=function(e){this.visible=!0,this.element.show(this.left,this.top,e)},n.prototype.hide=function(e){this.visible=!1,this.element.hide(e)},e.exports}({},{}),m=function(e,t){e.exports=t;var n=d.create,r=p,i=v,s=e.exports=function(e){r.call(this,e),e.className+=" collage",this.quadtree=n(15e3),this.collections=[]};return s.prototype=Object.create(r.prototype),s.create=function(e){var t=new s(e);return s.getApi(t)},s.getApi=function(e){var t=r.getApi(e);return t.touchesCanvas=e.touchesCanvas.bind(e),t.addCollection=e.addCollection.bind(e),t.removeCollection=e.removeCollection.bind(e),t},s.collection=h,s.prototype.scanTryLimit=200,s.prototype.missLimit=4,s.prototype.elementMargin=25,s.prototype.overScan=0,s.prototype.hidingArea=document.createDocumentFragment(),s.prototype.minElementSize=50,s.prototype.step=function(){r.prototype.step.call(this),this.fill()},s.prototype.start=function(){r.prototype.start.call(this),this.updateCanvasDimensions(),this.pickNextElement(),this.fillCenter()},s.prototype.addCollection=function(e){if(~this.collections.indexOf(e))return!1;var t=0,n=this.collections.length,r;while(t<n)r=t+n>>>1,this.collections[r].priority>e.priority?t=r+1:n=r;return this.collections.splice(t,0,e),!0},s.prototype.removeCollection=function(e){var t=this.collections.indexOf(e);return~t?(this.collections.splice(t,1),!0):!1},s.prototype.pickNextElementFailSafe=50,s.prototype.pickNextElement=function(){var e=this.pickNextElementFailSafe,t=this.collections.length,n;while(!n&&e--)n=this.collections[Math.random()*t|0].getNonvisibileElement();if(!n){e=this.pickNextElementFailSafe;while(!n&&e--)n=this.collections[Math.random()*t|0].getElement(),this.isVisible(n)&&(n=void 0)}this.nextElement=n,this.missCount=0,this.updateScanDimensions()},s.prototype.insertNextElement=function(e,t,n){if(this.isVisible(this.nextElement))return this.pickNextElement();var r=new i(this.nextElement,e,t);this.nextElement.locations.push(r),this.quadtree.insert(r),n?r.show(this.element):r.hide(this.hidingArea),this.pickNextElement()},s.prototype.isVisible=function(e){var t=0,n=e.locations.length,r,i=this.canvasLeft,s=this.canvasRight,o=this.canvasTop,u=this.canvasBottom;for(;t<n;t++){r=e.locations[t];if((i<r.left&&r.left<s||r.right<s&&i<r.right)&&(o<r.top&&r.top<u||r.bottom<u&&o<r.bottom))return!0}return!1},s.prototype.touchesCanvas=function(e){var t=this.canvasLeft-this.canvasWidth,n=this.canvasRight+this.canvasWidth,r=this.canvasTop-this.canvasHeight,i=this.canvasBottom+this.canvasHeight;return(t<e.left&&e.left<n||e.right<n&&t<e.right)&&(r<e.top&&e.top<i||e.bottom<i&&r<e.bottom)},s.prototype.hideOutOfViewElements=function(e){var t=this.minElementSize,n=this.canvasLeft-this.horizontalSpeedLimit-1,r=this.canvasRight+this.horizontalSpeedLimit+t,i,s=this.canvasTop-this.verticalSpeedLimit-1,o=this.canvasBottom+this.verticalSpeedLimit+t,u,a;u=s;for(;u<=this.canvasTop;u+=t){i=n;for(;i<=r;i+=t)a=this.quadtree.hasObject(i,u,1,1),a&&(i=a.right,a.visible&&!~e.indexOf(a)&&a.hide(this.hidingArea))}u=this.canvasBottom;for(;u<=o;u+=t){i=n;for(;i<=r;i+=t)a=this.quadtree.hasObject(i,u,1,1),a&&(i=a.right,a.visible&&!~e.indexOf(a)&&a.hide(this.hidingArea))}i=n;for(;i<=this.canvasLeft;i+=t){u=this.canvasTop;for(;u<=this.canvasBottom;u+=t)a=this.quadtree.hasObject(i,u,1,1),a&&(u=a.bottom,a.visible&&!~e.indexOf(a)&&a.hide(this.hidingArea))}i=this.canvasRight;for(;i<=r;i+=t){u=this.canvasTop;for(;u<=this.canvasBottom;u+=t)a=this.quadtree.hasObject(i,u,1,1),a&&(u=a.bottom,a.visible&&!~e.indexOf(a)&&a.hide(this.hidingArea))}},s.prototype.showInViewElements=function(){var e=this.minElementSize,t=this.canvasLeft+this.horizontalSpeedLimit,n=this.canvasRight-this.horizontalSpeedLimit,r=this.canvasRight+e,i,s=this.canvasTop+this.verticalSpeedLimit,o=this.canvasBottom-this.verticalSpeedLimit,u=this.canvasBottom+e,a,f,l=[];a=this.canvasTop;for(;a<s;a+=e){i=this.canvasLeft;for(;i<r;i+=e)f=this.quadtree.hasObject(i,a,1,1),f&&(l.push(f),i=f.right,f.visible||f.show(this.element))}a=o;for(;a<u;a+=e){i=this.canvasLeft;for(;i<r;i+=e)f=this.quadtree.hasObject(i,a,1,1),f&&(l.push(f),i=f.right,f.visible||f.show(this.element))}i=this.canvasLeft;for(;i<t;i+=e){a=s;for(;a<o;a+=e)f=this.quadtree.hasObject(i,a,1,1),f&&(l.push(f),a=f.bottom,f.visible||f.show(this.element))}i=n;for(;i<r;i+=e){a=s;for(;a<o;a+=e)f=this.quadtree.hasObject(i,a,1,1),f&&(l.push(f),a=f.bottom,f.visible||f.show(this.element))}return l},s.prototype.updateElementVisibility=function(){var e=this.showInViewElements();this.hideOutOfViewElements(e)},s.prototype.updateScanDimensions=function(){this.checkWidth=this.nextElement.width+this.elementMargin*2,this.scanLeft=this.canvasLeft-this.checkWidth,this.scanWidth=this.canvasWidth+this.checkWidth*2,this.scanRangeX=this.shiftX,this.scanRight=this.scanLeft+this.scanWidth,this.checkHeight=this.nextElement.height+this.elementMargin*2,this.scanTop=this.canvasTop-this.checkWidth,this.scanHeight=this.canvasHeight+this.checkWidth*2,this.scanRangeY=this.shiftY,this.scanBottom=this.scanTop+this.scanHeight},s.prototype.updateCanvasDimensions=function(){this.shiftY=Math.abs(this.offsetY-(this.lastOffsetY||this.offsetY)),this.shiftX=Math.abs(this.offsetX-(this.lastOffsetX||this.offsetX)),this.canvasLeft=-1*this.offsetX-this.overScan,this.canvasTop=-1*this.offsetY-this.overScan,this.canvasWidth=this.width+this.overScan*2,this.canvasHeight=this.height+this.overScan*2,this.canvasRight=this.canvasLeft+this.canvasWidth,this.canvasBottom=this.canvasTop+this.canvasHeight},s.prototype.fillCenter=function(){this.updateCanvasDimensions(),this.updateScanDimensions();var e,t,n=0,r=this.scanTryLimit*500,i=0,s=r/100;for(;n<r;n++)e=this.scanLeft+this.scanWidth*Math.random()|0,t=this.scanTop+this.scanHeight*Math.random()|0,i++,i>s&&(i=0,this.pickNextElement()),this.quadtree.hasObject(e-this.elementMargin,t-this.elementMargin,this.checkWidth,this.checkHeight)||(i=0,this.insertNextElement(e,t,!0),this.nextElement||this.pickNextElement());this.updateElementVisibility()},s.prototype.fill=function(){if(!this.nextElement)return this.pickNextElement();this.updateCanvasDimensions(),this.updateScanDimensions(),this.updateElementVisibility();var e=0,t=this.scanTryLimit,n,r,i;this.missCount++,this.missCount>this.missLimit&&this.pickNextElement();for(;e<t;e++){this.offsetY<this.lastOffsetY?(r=this.scanLeft+this.scanWidth*Math.random()|0,i=this.canvasTop+this.canvasHeight+this.scanRangeY*Math.random()|0):(r=this.scanLeft+this.scanWidth*Math.random()-this.checkWidth|0,i=this.canvasTop-this.scanRangeY*Math.random()-this.checkHeight|0),n=this.quadtree.hasObject(r-this.elementMargin,i-this.elementMargin,this.checkWidth,this.checkHeight);if(!n){this.insertNextElement(r,i);if(!this.nextElement)return}this.offsetX<this.lastOffsetX?(r=this.canvasLeft+this.canvasWidth+this.scanRangeX*Math.random()|0,i=this.scanTop+this.scanHeight*Math.random()|0):(r=this.canvasLeft-this.scanRangeX*Math.random()-this.checkWidth|0,i=this.scanTop+this.scanHeight*Math.random()-this.checkHeight|0),n=this.quadtree.hasObject(r-this.elementMargin,i-this.elementMargin,this.checkWidth,this.checkHeight);if(!n){this.insertNextElement(r,i);if(!this.nextElement)return}}this.lastOffsetX=this.offsetX,this.lastOffsetY=this.offsetY},e.exports}({},{});return m}();